{"version":3,"file":"component---src-pages-read-[id]-tsx-ae995cd3978994a8c784.js","mappings":"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","sources":["webpack://blockipedia/./node_modules/clsx/dist/clsx.m.js","webpack://blockipedia/./src/components/donation/index.tsx","webpack://blockipedia/./src/pages/read/[id].module.css","webpack://blockipedia/./src/pages/read/[id].tsx","webpack://blockipedia/./src/assets/svg/arrow-down.svg","webpack://blockipedia/./src/assets/svg/arrow-up.svg"],"sourcesContent":["function r(e) {\n  var t,\n      f,\n      n = \"\";\n  if (\"string\" == typeof e || \"number\" == typeof e) n += e;else if (\"object\" == typeof e) if (Array.isArray(e)) for (t = 0; t < e.length; t++) {\n    e[t] && (f = r(e[t])) && (n && (n += \" \"), n += f);\n  } else for (t in e) {\n    e[t] && (n && (n += \" \"), n += t);\n  }\n  return n;\n}\n\nexport function clsx() {\n  for (var e, t, f = 0, n = \"\"; f < arguments.length;) {\n    (e = arguments[f++]) && (t = r(e)) && (n && (n += \" \"), n += t);\n  }\n\n  return n;\n}\nexport default clsx;","import React, { useState } from \"react\"\nimport clsx from \"clsx\"\n\nexport function DonationModal(props: { show: boolean, articleId: number, dismiss: () => void, donate: (articleId: number, amount: number) => Promise<void> }) {\n    const [tokens, setTokens] = useState<number>(0)\n\n    return <div className={clsx(\n        \"absolute top-0 left-0 w-screen h-screen flex items-center justify-center bg-slate-600 bg-opacity-70 flex-col scale-0 transition-all origin-right duration-200\",\n        { \"scale-100\": props.show })}>\n        <div className=\"flex flex-col items-center justify-center gap-5 bg-gray-400 p-10 rounded-3xl\">\n            <p className=\"font-semibold text-slate-50 text-2xl\">You are about to donate to this article for {tokens} NEARs.</p>\n            <input className=\"border-none rounded w-40 h-16 text-right\" value={tokens} type=\"number\" step={0.00001} onChange={e => setTokens(parseFloat(e.target.value))}></input>\n            <div className=\"flex flex-row gap-4\">\n                <button className=\"bg-yellow-400 rounded-xl px-5 py-3 text-white font-bold text-2xl\" onClick={props.dismiss}>Cancel</button>\n                <button className=\"bg-blue-400 rounded-xl px-6 py-3 text-white font-bold text-2xl\" onClick={() => props.donate(props.articleId, tokens)}>Send</button>\n            </div>\n        </div>\n    </div>\n}","// extracted by mini-css-extract-plugin\nexport var bounce = \"[id]-module--bounce--fRvqK\";\nexport var headerAction = \"[id]-module--headerAction--4AB8b\";\nexport var headerInfo = \"[id]-module--headerInfo--dlMrz\";\nexport var headerRating = \"[id]-module--headerRating--6PcAb\";\nexport var headerSection = \"[id]-module--headerSection--TjqUf\";\nexport var readingView = \"[id]-module--readingView--GTIOZ\";\nexport var titleSection = \"[id]-module--titleSection--gsLX6\";","import React, { useEffect, useState } from \"react\"\nimport { NEARAuthRoute, useContract } from \"../../components/nearAuth\"\n\nimport { DonationModal } from \"../../components/donation\"\nimport { headerAction, headerInfo, headerRating, headerSection, readingView, titleSection } from \"./[id].module.css\"\nimport { Helmet } from \"react-helmet\"\nimport { MarkdownRenderer } from \"../../components/markdown\"\n\nimport ArrowUp from \"../../assets/svg/arrow-up.svg\"\nimport ArrowDown from \"../../assets/svg/arrow-down.svg\"\nimport { Article } from \"../../components/nearAuth/extendedContract\"\n\nenum VoteAction {\n    UP, DOWN\n}\n\nfunction convertToDateString(time: number) {\n    return new Date(time / 1000000).toDateString()\n}\n\nexport default function (props: { id: string }) {\n    const _id = parseInt(props.id)\n    const [article, setArticle] = useState<Article | undefined>(undefined)\n    const [upvote, setUpvote] = useState<number>(0)\n    const [upvoting, setUpvoting] = useState<boolean>(false)\n    const [downvote, setDownvote] = useState<number>(0)\n    const [downvoting, setDownvoting] = useState<boolean>(false)\n\n    const [showDonation, setShowDonation] = useState(false)\n\n    const contract = useContract()\n\n    async function vote(action: VoteAction) {\n        switch (action) {\n            case VoteAction.UP:\n                setUpvoting(true)\n                await contract.upvote(article!.id)\n                setUpvote(upvote + 1)\n                setUpvoting(false)\n                break\n            case VoteAction.DOWN:\n                setDownvoting(true)\n                await contract.downvote(article!.id)\n                setDownvote(downvote + 1)\n                setDownvoting(false)\n                break\n        }\n    }\n\n    useEffect(function () {\n        // Fetch article from contract\n        contract.getArticle(_id).then(article => {\n            setArticle(article)\n            setUpvote(article.upvote)\n            setDownvote(article.downvote)\n        })\n    }, [])\n\n    if (article !== undefined) {\n        return <NEARAuthRoute>\n            <Helmet>\n                <title>Blockipedia: {article.title}</title>\n            </Helmet>\n            <article className={readingView}>\n                <div className={headerSection}>\n                    <div className={headerInfo}>\n                        <div>\n                            <div>{article.author}</div>\n                            <div>{convertToDateString(article.published_date)}</div>\n                        </div>\n                        <div className={headerRating} >\n                            <button disabled={upvoting} onClick={() => vote(VoteAction.UP)}><ArrowUp /></button>\n                            {upvote}\n                            <button disabled={downvoting} onClick={() => vote(VoteAction.DOWN)}><ArrowDown /></button>\n                            {downvote}\n                        </div>\n                    </div>\n                    <div className={headerAction}>\n                        <button onClick={setShowDonation.bind(null, true)}>Donate</button>\n                    </div>\n                </div>\n                <div className={titleSection}>\n                    {article.title}\n                </div>\n                <div>\n                    <MarkdownRenderer>\n                        {article.content}\n                    </MarkdownRenderer>\n                </div>\n            </article>\n\n            <DonationModal\n                show={showDonation}\n                articleId={article.id}\n                dismiss={setShowDonation.bind(null, false)}\n                donate={contract.donate}></DonationModal>\n        </NEARAuthRoute>\n    } else {\n        return <NEARAuthRoute>\n            <Helmet>\n                <title>Blockipedia: Loading...</title>\n            </Helmet>\n            <article className={readingView}>\n                Loading article ...\n            </article>\n        </NEARAuthRoute>\n    }\n}\n","var React = require('react');\n\nfunction ArrowDown (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"rect\",{\"width\":\"48\",\"height\":\"48\",\"fill\":\"white\",\"fillOpacity\":\"0.01\",\"key\":0}),React.createElement(\"path\",{\"d\":\"M37 18L25 30L13 18\",\"stroke\":\"black\",\"strokeWidth\":\"4\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"key\":1})]);\n}\n\nArrowDown.defaultProps = {\"width\":\"30px\",\"height\":\"30px\",\"viewBox\":\"0 0 48 48\",\"fill\":\"none\"};\n\nmodule.exports = ArrowDown;\n\nArrowDown.default = ArrowDown;\n","var React = require('react');\n\nfunction ArrowUp (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"rect\",{\"width\":\"48\",\"height\":\"48\",\"fill\":\"white\",\"fillOpacity\":\"0.01\",\"key\":0}),React.createElement(\"path\",{\"d\":\"M13 30L25 18L37 30\",\"stroke\":\"black\",\"strokeWidth\":\"4\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"key\":1})]);\n}\n\nArrowUp.defaultProps = {\"width\":\"30px\",\"height\":\"30px\",\"viewBox\":\"0 0 48 48\",\"fill\":\"none\"};\n\nmodule.exports = ArrowUp;\n\nArrowUp.default = ArrowUp;\n"],"names":["r","e","t","f","n","Array","isArray","length","arguments","DonationModal","props","useState","tokens","setTokens","React","className","clsx","show","value","type","step","onChange","parseFloat","target","onClick","dismiss","donate","articleId","VoteAction","readingView","time","_id","parseInt","id","undefined","article","setArticle","upvote","setUpvote","upvoting","setUpvoting","downvote","setDownvote","downvoting","setDownvoting","showDonation","setShowDonation","contract","useContract","vote","action","UP","DOWN","_context","useEffect","getArticle","then","NEARAuthRoute","Helmet","title","author","published_date","Date","toDateString","disabled","ArrowUp","ArrowDown","bind","MarkdownRenderer","content","createElement","defaultProps","module","exports","default"],"sourceRoot":""}